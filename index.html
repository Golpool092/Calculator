<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mills Calculators</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
            transition: all 0.2s;
        }
        
        body {
            background: #000;
            color: #fff;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        /* Оранжевые частицы */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: #FF6B00;
            border-radius: 50%;
            opacity: 0.5;
            animation: float linear infinite;
        }
        
        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-100px) translateX(100px); }
            100% { transform: translateY(0) translateX(0); }
        }
        
        .container {
            max-width: 100%;
            padding: 20px;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .header h1 {
            color: #FF6B00;
            font-size: 24px;
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .tab-btn {
            padding: 10px 15px;
            background: #222;
            border: none;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
        }
        
        .tab-btn.active {
            background: #FF6B00;
        }
        
        .calculator {
            display: none;
            background: rgba(30, 30, 30, 0.8);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.3);
        }
        
        .calculator.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .display {
            width: 100%;
            padding: 15px;
            font-size: 28px;
            text-align: right;
            border-radius: 10px;
            margin-bottom: 15px;
            background: #222;
            color: #fff;
            border: 1px solid #333;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .btn {
            border: none;
            height: 60px;
            border-radius: 10px;
            font-size: 20px;
            cursor: pointer;
            background: #333;
            color: #fff;
        }
        
        .btn:hover {
            transform: scale(0.95);
        }
        
        .btn.orange {
            background: #FF6B00;
        }
        
        .btn.grey {
            background: #444;
        }
        
        .btn.double {
            grid-column: span 2;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #aaa;
        }
        
        .input-group input, 
        .input-group select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            background: #222;
            border: 1px solid #333;
            color: #fff;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #222;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
            border: 1px solid #333;
        }
        
        .instructions {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 107, 0, 0.1);
            border-radius: 10px;
            border-left: 3px solid #FF6B00;
        }
        
        .instructions h3 {
            color: #FF6B00;
            margin-bottom: 10px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Оранжевые частицы -->
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <h1>Mills Calculators</h1>
        </div>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="standard">Обычный</button>
            <button class="tab-btn" data-tab="scientific">Научный</button>
            <button class="tab-btn" data-tab="currency">Валюта</button>
            <button class="tab-btn" data-tab="bmi">ИМТ</button>
            <button class="tab-btn" data-tab="area">Площадь</button>
            <button class="tab-btn" data-tab="time">Время</button>
        </div>
        
        <!-- Обычный калькулятор -->
        <div id="standard" class="calculator active">
            <div class="display" id="display">0</div>
            <div class="buttons">
                <button class="btn grey" onclick="clearDisplay()">C</button>
                <button class="btn grey" onclick="appendToDisplay('(')">(</button>
                <button class="btn grey" onclick="appendToDisplay(')')">)</button>
                <button class="btn orange" onclick="appendToDisplay('/')">/</button>
                
                <button class="btn" onclick="appendToDisplay('7')">7</button>
                <button class="btn" onclick="appendToDisplay('8')">8</button>
                <button class="btn" onclick="appendToDisplay('9')">9</button>
                <button class="btn orange" onclick="appendToDisplay('*')">×</button>
                
                <button class="btn" onclick="appendToDisplay('4')">4</button>
                <button class="btn" onclick="appendToDisplay('5')">5</button>
                <button class="btn" onclick="appendToDisplay('6')">6</button>
                <button class="btn orange" onclick="appendToDisplay('-')">-</button>
                
                <button class="btn" onclick="appendToDisplay('1')">1</button>
                <button class="btn" onclick="appendToDisplay('2')">2</button>
                <button class="btn" onclick="appendToDisplay('3')">3</button>
                <button class="btn orange" onclick="appendToDisplay('+')">+</button>
                
                <button class="btn grey" onclick="calculateSquareRoot()">√</button>
                <button class="btn" onclick="appendToDisplay('0')">0</button>
                <button class="btn" onclick="appendToDisplay('.')">.</button>
                <button class="btn orange" onclick="calculate()">=</button>
                
                <button class="btn grey" onclick="appendToDisplay('%')">%</button>
                <button class="btn grey" onclick="appendToDisplay('**')">x<sup>y</sup></button>
                <button class="btn grey" onclick="backspace()">⌫</button>
            </div>
            
            <div class="instructions">
              <h3> последовательность </h3>
                <p><b>Корень:</b> √4 = 2 </p>
                <p><b>Степень:</b> 2 ** 3 = 8 (2 в степени 3)</p>
            </div>
        </div>
        
        <!-- Научный калькулятор -->
        <div id="scientific" class="calculator">
            <div class="display" id="sci-display">0</div>
            <div class="buttons">
                <button class="btn grey" onclick="sciClear()">C</button>
                <button class="btn grey" onclick="sciFunction('Math.sin(')">sin</button>
                <button class="btn grey" onclick="sciFunction('Math.cos(')">cos</button>
                <button class="btn orange" onclick="sciFunction('/')">/</button>
                
                <button class="btn grey" onclick="sciFunction('Math.log(')">ln</button>
                <button class="btn grey" onclick="sciFunction('Math.PI')">π</button>
                <button class="btn grey" onclick="sciFunction('Math.pow(')">x^y</button>
                <button class="btn orange" onclick="sciFunction('*')">×</button>
                
                <button class="btn grey" onclick="sciFunction('Math.sqrt(')">√</button>
                <button class="btn" onclick="sciAppend('7')">7</button>
                <button class="btn" onclick="sciAppend('8')">8</button>
                <button class="btn orange" onclick="sciFunction('-')">-</button>
                
                <button class="btn grey" onclick="sciFunction('Math.tan(')">tan</button>
                <button class="btn" onclick="sciAppend('4')">4</button>
                <button class="btn" onclick="sciAppend('5')">5</button>
                <button class="btn orange" onclick="sciFunction('+')">+</button>
                
                <button class="btn grey" onclick="sciFunction('Math.exp(')">e^x</button>
                <button class="btn" onclick="sciAppend('1')">1</button>
                <button class="btn" onclick="sciAppend('2')">2</button>
                <button class="btn" onclick="sciAppend('3')">3</button>
                
                <button class="btn grey" onclick="sciFunction(')')">)</button>
                <button class="btn" onclick="sciAppend('0')">0</button>
                <button class="btn" onclick="sciAppend('.')">.</button>
                <button class="btn orange" onclick="sciCalculate()">=</button>
            </div>
            
            <div class="instructions">
                <h3>Инструкция по использованию</h3>
                <p><b>Тригонометрия:</b> sin(), cos(), tan()</p>
                <p><b>Логарифмы:</b> log() - натуральный, ln() - десятичный</p>
                <p><b>Степень:</b> Math.pow(x,y) или x^y</p>
                <p><b>Корень:</b> Math.sqrt(x) или √x</p>
                <p><b>Константы:</b> π - число Пи</p>
            </div>
        </div>
        
        <!-- Конвертер валют -->
        <div id="currency" class="calculator">
            <div class="input-group">
                <label>Сумма</label>
                <input type="number" id="currency-amount" placeholder="100">
            </div>
            <div class="input-group">
                <label>Из валюты</label>
                <select id="currency-from">
                    <option value="USD">USD - Доллар</option>
                    <option value="EUR">EUR - Евро</option>
                    <option value="RUB" selected>RUB - Рубль</option>
                </select>
            </div>
            <div class="input-group">
                <label>В валюту</label>
                <select id="currency-to">
                    <option value="USD" selected>USD - Доллар</option>
                    <option value="EUR">EUR - Евро</option>
                    <option value="RUB">RUB - Рубль</option>
                </select>
            </div>
            <button class="btn orange double" onclick="convertCurrency()">Конвертировать</button>
            <div class="result" id="currency-result"></div>
        </div>
        
        <!-- Калькулятор ИМТ -->
        <div id="bmi" class="calculator">
            <div class="input-group">
                <label>Вес (кг)</label>
                <input type="number" id="bmi-weight" placeholder="70">
            </div>
            <div class="input-group">
                <label>Рост (см)</label>
                <input type="number" id="bmi-height" placeholder="175">
            </div>
            <button class="btn orange double" onclick="calculateBMI()">Рассчитать ИМТ</button>
            <div class="result" id="bmi-result"></div>
        </div>
        
        <!-- Калькулятор площади -->
        <div id="area" class="calculator">
            <div class="input-group">
                <label>Фигура</label>
                <select id="area-shape" onchange="updateAreaFields()">
                    <option value="square">Квадрат</option>
                    <option value="rectangle">Прямоугольник</option>
                    <option value="circle">Круг</option>
                    <option value="triangle">Треугольник</option>
                </select>
            </div>
            <div class="input-group" id="area-field1">
                <label>Сторона (a)</label>
                <input type="number" id="area-value1" placeholder="10">
            </div>
            <div class="input-group hidden" id="area-field2">
                <label>Сторона (b)</label>
                <input type="number" id="area-value2" placeholder="5">
            </div>
            <div class="input-group hidden" id="area-field3">
                <label>Высота</label>
                <input type="number" id="area-value3" placeholder="8">
            </div>
            <button class="btn orange double" onclick="calculateArea()">Вычислить</button>
            <div class="result" id="area-result"></div>
        </div>
        
        <!-- Калькулятор времени -->
        <div id="time" class="calculator">
            <div class="input-group">
                <label>Часовой пояс 1</label>
                <select id="timezone1">
                    <option value="0">UTC+0 (Лондон)</option>
                    <option value="3" selected>UTC+3 (Москва)</option>
                    <option value="-5">UTC-5 (Нью-Йорк)</option>
                </select>
            </div>
            <div class="input-group">
                <label>Время</label>
                <input type="time" id="time-input" value="12:00">
            </div>
            <div class="input-group">
                <label>Часовой пояс 2</label>
                <select id="timezone2">
                    <option value="0">UTC+0 (Лондон)</option>
                    <option value="3">UTC+3 (Москва)</option>
                    <option value="-5" selected>UTC-5 (Нью-Йорк)</option>
                </select>
            </div>
            <button class="btn orange double" onclick="calculateTime()">Конвертировать</button>
            <div class="result" id="time-result"></div>
        </div>
    </div>

    <script>
        // Создаем оранжевые частицы
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Случайные параметры
                const size = Math.random() * 10 + 5;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const duration = Math.random() * 20 + 10;
                const delay = Math.random() * 5;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.top = `${posY}%`;
                particle.style.animationDuration = `${duration}s`;
                particle.style.animationDelay = `${delay}s`;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // Инициализация частиц
        createParticles();

        // Переключение вкладок
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.calculator').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });

        // ===== Обычный калькулятор =====
        let currentInput = '0';
        const display = document.getElementById('display');

        function appendToDisplay(value) {
            // Проверка на закрывающую скобку без открывающей
            if (value === ')' && !currentInput.includes('(')) {
                return;
            }
            
            // Проверка на оператор после открывающей скобки
            if ('+-*/'.includes(value) && currentInput.slice(-1) === '(') {
                return;
            }
            
            if (currentInput === '0' && value !== '.' && !'()%'.includes(value)) {
                currentInput = value;
            } else {
                currentInput += value;
            }
            display.textContent = currentInput;
        }

        function clearDisplay() {
            currentInput = '0';
            display.textContent = currentInput;
        }

        function backspace() {
            if (currentInput.length === 1) {
                currentInput = '0';
            } else {
                currentInput = currentInput.slice(0, -1);
            }
            display.textContent = currentInput;
        }

        function calculateSquareRoot() {
            try {
                if (currentInput === '0') return;
                const result = Math.sqrt(eval(currentInput));
                currentInput = result.toString();
                display.textContent = currentInput;
            } catch {
                display.textContent = 'Ошибка';
                currentInput = '0';
            }
        }

        function calculate() {
            try {
                // Проверка баланса скобок
                const openBrackets = (currentInput.match(/\(/g) || []).length;
                const closeBrackets = (currentInput.match(/\)/g) || []).length;
                
                if (openBrackets !== closeBrackets) {
                    throw new Error("Несбалансированные скобки");
                }
                
                // Обработка процентов
                if (currentInput.includes('%')) {
                    const parts = currentInput.split(/([\+\-\*\/])/);
                    const percentIndex = parts.findIndex(p => p.includes('%'));
                    if (percentIndex !== -1) {
                        const num = parseFloat(parts[percentIndex].replace('%', ''));
                        const operator = parts[percentIndex - 1];
                        const prevNum = parseFloat(parts[percentIndex - 2] || currentInput.replace('%', ''));
                        
                        let result;
                        switch (operator) {
                            case '+': result = prevNum + (prevNum * num / 100); break;
                            case '-': result = prevNum - (prevNum * num / 100); break;
                            case '*': result = prevNum * (num / 100); break;
                            case '/': result = prevNum / (num / 100); break;
                            default: result = num / 100;
                        }
                        currentInput = result.toString();
                    }
                } else {
                    currentInput = eval(currentInput).toString();
                }
                display.textContent = currentInput;
            } catch {
                display.textContent = 'Ошибка';
                currentInput = '0';
            }
        }

        // ===== Научный калькулятор =====
        let sciInput = '0';
        const sciDisplay = document.getElementById('sci-display');

        function sciAppend(value) {
            if (sciInput === '0' && value !== '.') {
                sciInput = value;
            } else {
                sciInput += value;
            }
            sciDisplay.textContent = sciInput;
        }

        function sciFunction(fn) {
            sciInput += fn;
            sciDisplay.textContent = sciInput;
        }

        function sciClear() {
            sciInput = '0';
            sciDisplay.textContent = sciInput;
        }

        function sciCalculate() {
            try {
                // Заменяем x^y на Math.pow(x,y)
                let expression = sciInput.replace(/(\d+)\^(\d+)/g, 'Math.pow($1,$2)');
                sciInput = eval(expression).toString();
                sciDisplay.textContent = sciInput;
            } catch {
                sciDisplay.textContent = 'Ошибка';
                sciInput = '0';
            }
        }

        // ===== Конвертер валют =====
        async function convertCurrency() {
            const amount = parseFloat(document.getElementById('currency-amount').value);
            const from = document.getElementById('currency-from').value;
            const to = document.getElementById('currency-to').value;
            
            if (!amount) {
                document.getElementById('currency-result').textContent = 'Введите сумму';
                return;
            }
            
            try {
                // Mock данные (в реальном приложении используйте API)
                const rates = {
                    USD: { RUB: 90, EUR: 0.85 },
                    EUR: { RUB: 100, USD: 1.18 },
                    RUB: { USD: 0.011, EUR: 0.01 }
                };
                
                let result;
                if (from === to) {
                    result = amount;
                } else {
                    result = amount * rates[from][to];
                }
                
                document.getElementById('currency-result').textContent = 
                    `${amount.toFixed(2)} ${from} = ${result.toFixed(2)} ${to}`;
            } catch {
                document.getElementById('currency-result').textContent = 'Ошибка конвертации';
            }
        }

        // ===== Калькулятор ИМТ =====
        function calculateBMI() {
            const weight = parseFloat(document.getElementById('bmi-weight').value);
            const height = parseFloat(document.getElementById('bmi-height').value) / 100;
            
            if (weight && height) {
                const bmi = weight / (height * height);
                let status;
                
                if (bmi < 18.5) status = 'Недостаточный вес';
                else if (bmi < 25) status = 'Норма';
                else if (bmi < 30) status = 'Избыточный вес';
                else status = 'Ожирение';
                
                document.getElementById('bmi-result').textContent = 
                    `ИМТ: ${bmi.toFixed(1)} (${status})`;
            } else {
                document.getElementById('bmi-result').textContent = 'Введите все значения';
            }
        }

        // ===== Калькулятор площади =====
        function updateAreaFields() {
            const shape = document.getElementById('area-shape').value;
            document.getElementById('area-field2').classList.add('hidden');
            document.getElementById('area-field3').classList.add('hidden');
            
            if (shape === 'rectangle') {
                document.getElementById('area-field2').classList.remove('hidden');
            } else if (shape === 'triangle') {
                document.getElementById('area-field3').classList.remove('hidden');
            }
        }

        function calculateArea() {
            const shape = document.getElementById('area-shape').value;
            const val1 = parseFloat(document.getElementById('area-value1').value);
            let area = 0;
            
            try {
                switch (shape) {
                    case 'square':
                        area = val1 * val1;
                        break;
                    case 'rectangle':
                        const val2 = parseFloat(document.getElementById('area-value2').value);
                        area = val1 * val2;
                        break;
                    case 'circle':
                        area = Math.PI * val1 * val1;
                        break;
                    case 'triangle':
                        const height = parseFloat(document.getElementById('area-value3').value);
                        area = 0.5 * val1 * height;
                        break;
                }
                
                document.getElementById('area-result').textContent = 
                    `Площадь: ${area.toFixed(2)} ${shape === 'circle' ? 'м²' : 'см²'}`;
            } catch {
                document.getElementById('area-result').textContent = 'Ошибка вычисления';
            }
        }

        // ===== Калькулятор времени =====
        function calculateTime() {
            const timeInput = document.getElementById('time-input').value;
            const tz1 = parseInt(document.getElementById('timezone1').value);
            const tz2 = parseInt(document.getElementById('timezone2').value);
            
            if (!timeInput) {
                document.getElementById('time-result').textContent = 'Введите время';
                return;
            }
            
            const [hours, minutes] = timeInput.split(':').map(Number);
            let newHours = hours + (tz2 - tz1);
            
            // Корректировка перехода через сутки
            if (newHours >= 24) newHours -= 24;
            if (newHours < 0) newHours += 24;
            
            const newTime = `${String(newHours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;
            document.getElementById('time-result').textContent = 
                `Время: ${newTime} (UTC${tz2 >= 0 ? '+' : ''}${tz2})`;
        }

        // Инициализация
        updateAreaFields();
    </script>
</body>
</html>